@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    /* Street Racing Dark Palette */
    --background: 220 20% 4%;
    --foreground: 0 0% 98%;

    --card: 220 20% 8%;
    --card-foreground: 0 0% 98%;

    --popover: 220 20% 8%;
    --popover-foreground: 0 0% 98%;

    --primary: 25 100% 50%;
    --primary-foreground: 0 0% 0%;

    --secondary: 190 100% 50%;
    --secondary-foreground: 0 0% 0%;

    --muted: 220 20% 12%;
    --muted-foreground: 0 0% 60%;

    --accent: 120 100% 60%;
    --accent-foreground: 0 0% 0%;

    --destructive: 340 100% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 15%;
    --input: 220 20% 12%;
    --ring: 25 100% 50%;

    --radius: 0.5rem;

    /* Neon Racing Colors */
    --neon-orange: 25 100% 50%;
    --neon-blue: 190 100% 50%;
    --neon-green: 120 100% 60%;
    --neon-pink: 340 100% 60%;
    
    /* Neon Glow Shadows */
    --glow-orange: 0 0 20px hsl(25 100% 50% / 0.6), 0 0 40px hsl(25 100% 50% / 0.4);
    --glow-blue: 0 0 20px hsl(190 100% 50% / 0.6), 0 0 40px hsl(190 100% 50% / 0.4);
    --glow-green: 0 0 20px hsl(120 100% 60% / 0.6), 0 0 40px hsl(120 100% 60% / 0.4);
    --glow-pink: 0 0 20px hsl(340 100% 60% / 0.6), 0 0 40px hsl(340 100% 60% / 0.4);
    
    /* Racing Gradients */
    --gradient-neon: linear-gradient(135deg, hsl(25 100% 50%), hsl(190 100% 50%), hsl(120 100% 60%));
    /* Custom tuning gradient (more vivid spectrum) */
    --gradient-tuning: linear-gradient(135deg,
      hsl(285 100% 62%), /* electric violet */
      hsl(200 100% 60%), /* neon cyan */
      hsl(50 100% 55%),  /* turbo yellow */
      hsl(330 100% 60%)  /* hot magenta */
    );
    --gradient-dark: linear-gradient(180deg, hsl(220 20% 4%), hsl(220 20% 8%));
    
    /* Smooth Animations */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-premium: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    /* Same vibrant theme for dark mode */
    --background: 220 25% 10%;
    --foreground: 0 0% 98%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Barlow Condensed', sans-serif;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Bebas Neue', sans-serif;
    letter-spacing: 0.05em;
  }
}

@layer utilities {
  .bg-gradient-neon { background-image: var(--gradient-neon); }
  .bg-gradient-dark { background-image: var(--gradient-dark); }
  
  .neon-glow-orange {
    text-shadow: var(--glow-orange);
  }
  
  .neon-glow-blue {
    text-shadow: var(--glow-blue);
  }
  
  .neon-glow-green {
    text-shadow: var(--glow-green);
  }
  
  .neon-glow-pink {
    text-shadow: var(--glow-pink);
  }
  
  .border-neon-orange {
    border-color: hsl(var(--neon-orange));
    box-shadow: var(--glow-orange);
  }
  
  .border-neon-blue {
    border-color: hsl(var(--neon-blue));
    box-shadow: var(--glow-blue);
  }
  
  .transition-smooth {
    transition: var(--transition-smooth);
  }
  
  .transition-premium {
    transition: var(--transition-premium);
  }

  .title-text {
    overflow-wrap: anywhere;
    word-break: normal;
    white-space: normal;
    hyphens: auto;
    text-wrap: balance;
  }

  /* Animated neon gradient utility for dynamic color-shifting backgrounds */
  .animated-neon-bg {
    background-image: var(--gradient-neon);
    background-size: 300% 300%;
    animation: neonShift 6s linear infinite;
    filter: saturate(1.2);
  }

  /* Tuning variant: faster, wider color range and glow */
  .animated-tuning-bg {
    background-image: var(--gradient-tuning);
    background-size: 400% 400%;
    animation: tuningShift 8s linear infinite, neonPulse 2.5s ease-in-out infinite;
    filter: saturate(1.3) brightness(1.08);
  }

  .tuning-glow {
    box-shadow:
      0 0 16px hsl(285 100% 62% / 0.35),
      0 0 28px hsl(200 100% 60% / 0.35),
      0 0 40px hsl(330 100% 60% / 0.3);
  }

  /* Red-Blue animated border ring (neon style) */
  .rb-border-loop {
    position: relative;
    isolation: isolate;
  }
  .rb-border-loop::before {
    content: "";
    position: absolute;
    inset: -2px; /* slight overscan for glow */
    border-radius: inherit;
    padding: 2px; /* border thickness */
    background: conic-gradient(from 0deg,
      #ff2a4f,
      #0aa3ff,
      #ff2a4f
    );
    /* show only the ring */
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    pointer-events: none;
    animation: rbSpin 6s linear infinite;
    will-change: transform;
  }

  .rb-border-glow {
    box-shadow:
      0 0 18px rgba(255, 42, 79, 0.45),
      0 0 24px rgba(10, 163, 255, 0.4);
  }

  /* Red-Blue flowing border (no rotation, continuous loop along edge) */
  .rb-flow-border {
    border: 2px solid transparent;
    border-radius: 9999px;
    /* Two backgrounds: solid inner fill + gradient for the border ring */
    background:
      linear-gradient(#0b0b0b, #0b0b0b) padding-box,
      linear-gradient(90deg, #ff2a4f, #0aa3ff, #ff2a4f) border-box;
    background-size: auto, 200% 200%;
    background-position: center, 0% 50%;
    animation: rbFlow 12s linear infinite;
    will-change: background-position;
  }

  /* Forced flowing border using masked pseudo-element (more reliable across browsers) */
  .rb-flow-force {
    position: relative;
    isolation: isolate;
    border-radius: 9999px;
    border: 2px solid transparent; /* intrinsic border for layout */
    background: #0b0b0b; /* inner fill */
  }
  .rb-flow-force::before {
    content: "";
    position: absolute;
    inset: -2px; /* overscan to cover border area */
    border-radius: inherit;
    padding: 2px; /* ring thickness */
    background: linear-gradient(90deg, #ff0033, #0088ff, #ff0033);
    background-size: 300% 100%;
    background-position: 0% 50%;
    /* mask to show only border ring */
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    pointer-events: none;
    animation: rbFlowX 12s linear infinite;
    animation-play-state: running !important;
    transform: translateZ(0);
    will-change: background-position;
  }
  /* Feature card utilities */
  .feature-card {
    border: 2px solid hsl(var(--border) / 0.3);
    background: rgba(255,255,255,0.03);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-radius: 1rem;
    transition: var(--transition-premium);
  }
  .feature-card:hover {
    border-color: hsl(var(--primary) / 0.6);
    box-shadow: 0 0 18px hsl(25 100% 50% / 0.25), 0 0 30px hsl(25 100% 50% / 0.15);
    transform: translateY(-6px);
  }
  .feature-icon {
    height: 42px;
    width: 42px;
    display: grid;
    place-items: center;
    border-radius: 0.75rem;
    background: linear-gradient(135deg, hsl(25 100% 50%), hsl(25 100% 60%));
    box-shadow: var(--glow-orange);
  }
  .feature-title {
    font-weight: 700;
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }
}

/* Street Racing Animations */
@keyframes fadeIn {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes scaleIn {
  0% { transform: scale(0.95); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes neonPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

/* Smooth background position shift to cycle through the neon gradient */
@keyframes neonShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes tuningShift {
  0% { background-position: 0% 50%; }
  33% { background-position: 50% 50%; }
  66% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes rbSpin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Animate only the border gradient's position to create a flowing effect */
@keyframes rbFlow {
  0% { background-position: center, 0% 50%; }
  50% { background-position: center, 100% 50%; }
  100% { background-position: center, 200% 50%; }
}

/* Flowing ring via pseudo-element (forced animation) */
@keyframes rbFlowX {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}

/* Even if user prefers reduced motion, keep subtle animation per request */
@media (prefers-reduced-motion: reduce) {
  .rb-flow-force::before {
    animation: rbFlowX 12s linear infinite !important;
  }
}

@keyframes glitchText {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(-2px, 2px); }
  40% { transform: translate(-2px, -2px); }
  60% { transform: translate(2px, 2px); }
  80% { transform: translate(2px, -2px); }
}

@keyframes scanlineMove {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100%); }
}

@keyframes gridMove {
  0% { transform: perspective(500px) rotateX(60deg) translateY(0); }
  100% { transform: perspective(500px) rotateX(60deg) translateY(50px); }
}

@keyframes chromaticAberration {
  0% { filter: none; }
  100% { filter: drop-shadow(2px 0 0 hsl(25 100% 50%)) drop-shadow(-2px 0 0 hsl(190 100% 50%)); }
}

@keyframes speedLine {
  0% { transform: translateX(0); opacity: 0; }
  10% { opacity: 0.5; }
  90% { opacity: 0.5; }
  100% { transform: translateX(200vw); opacity: 0; }
}

.animate-fade-in {
  animation: fadeIn 0.6s ease-out;
}

.animate-scale-in {
  animation: scaleIn 0.4s ease-out;
}

.animate-neon-pulse {
  animation: neonPulse 2s ease-in-out infinite;
}

.animate-glitch {
  animation: glitchText 0.3s ease-in-out infinite;
}

.animate-scanline {
  animation: scanlineMove 8s linear infinite;
}

.animate-grid {
  animation: gridMove 20s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
  }

  /* Force essential animations when 'force-motion' is set on <html> */
  .force-motion .animate-fade-in { animation: fadeIn 0.6s ease-out !important; }
  .force-motion .animate-scale-in { animation: scaleIn 0.4s ease-out !important; }
  .force-motion .animate-neon-pulse { animation: neonPulse 2s ease-in-out infinite !important; }
  .force-motion .animate-glitch { animation: glitchText 0.3s ease-in-out infinite !important; }
  .force-motion .animate-scanline { animation: scanlineMove 8s linear infinite !important; }
  .force-motion .animate-grid { animation: gridMove 20s ease-in-out infinite !important; }
  .force-motion .speedline { 
    animation: speedLine var(--speedline-duration, 2s) ease-in-out infinite !important; 
    animation-delay: var(--speedline-delay, 0s) !important;
  }
}
